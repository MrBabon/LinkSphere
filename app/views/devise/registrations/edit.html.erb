<% content_for :header do %>
  <%= render 'edit_header' %>
<% end %>

<div class="h-100 bg-charcoal pt-28 pb-10">
  <div class="h-auto bg-light-gray rounded-4 shadow-sm mx-3 mb-10">
    <%= simple_form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
      <%= f.error_notification %>

      <div class="d-flex flex-column justify-content-center align-items-center position-relative bottom-8">
        <% if current_user.avatar.attached? %>
                <%= cl_image_tag current_user.avatar.key, alt: "Avatar to #{current_user.first_name.capitalize}", class: "rounded-circle img-avatar w-24 h-24 border border-white border-2 shadow-sm", id: "user-avatar" %>
        <% else %>
                <%= image_tag("avatar.svg", class: "rounded-circle img-fluid w-24 h-24 border border-2 border-white shadow-sm", alt: "Avatar par dÃ©faut", id: "user-avatar") %>
        <% end %>
        <label for="<%= f.object_name %>_avatar" class="cursor-pointer w-5 h-5 bg-teal rounded-circle position-relative bottom-6 left-7 d-flex align-items-center justify-content-center">
                <%= image_tag("pen-solid.svg", class: "h-3 fill-yellow") %>
                <%= f.input :avatar, as: :file, label: false, wrapper: false, input_html: { class: "d-none", data: { controller: "preview-image", action: "change->preview-image#previewImage" } } %>
        </label>
        <div id="image-preview-container"></div>
      </div>

      <div class="form-inputs mx-edit">
        <div class="pb-3 font-light">
          <p class=" text-silver">Personal informations</p>
        </div>
        <div class="form-group">
          <%= f.label :first_name, 'First Name', class: "form-label fw-semibold" %>
          <%= f.input :first_name,
                      required: true,
                      input_html: { autocomplete: "first name", class: "form-control rounded w-100 py-2 px-4 bg-white border border-0" },
                      label: "First Name",
                      label_html: { class: "d-none" } %>
        </div>
        <div class="form-group">
          <%= f.label :last_name, 'Last Name', class: "form-label fw-semibold" %>
          <%= f.input :last_name,
                      required: true,
                      input_html: { autocomplete: "last name", class: "form-control rounded w-100 py-2 px-4 bg-white border border-0" },
                      label: "Last Name",
                      label_html: { class: "d-none" } %>
        </div>
        <div class="form-group">
          <%= f.label :phone, 'Phone Number', class: "form-label fw-semibold" %>
          <%= f.input :phone,
                      required: true,
                      input_html: { autocomplete: "phone", type: "tel", class: "form-control rounded w-100 py-2 px-4 bg-white border border-0" },
                      label: "Phone Number",
                      label_html: { class: "d-none" } %>
        </div>
        <div class="form-group">
          <%= f.label :email, class: "form-label fw-semibold" %>
          <%= f.input :email,
                      required: true,
                      input_html: { autocomplete: "email", class: "form-control rounded w-100 py-2 px-4 bg-white border border-0" },
                      label_html: { class: "d-none" } %>
        </div>
        <div class="form-group">
          <%= f.label :job, 'Job Title', class: "form-label fw-semibold" %>
          <%= f.input :job,
                      required: false,
                      input_html: { autocomplete: "job", class: "form-control rounded w-100 py-2 px-4 bg-white border border-0" },
                      label_html: { class: "d-none" } %>
        </div>
        <div class="form-group">
          <%= f.label :industry, 'Job Title', class: "form-label fw-semibold" %>
          <%= f.input :industry,
                      collection: User.industries.map { |key, value| [value, key] },
                      selected: f.object.industry,
                      include_blank: 'Please select',
                      required: false,
                      input_html: { autocomplete: "industry", class: "form-control rounded w-100 py-2 px-4 bg-white border border-0" },
                      label_html: { class: "d-none" } %>
        </div>
        <%# METTRE UNE SEARCH BAR ICI POUR RECHERCHER UNE ENTREPRISE AFIN DE L'AJOUTER DANS SONT PROFIL %>
        <div class="form-group">
          <%= f.label :biography, 'Biography', class: "form-label fw-semibold" %>
          <%= f.input :biography,
                      required: false,
                      input_html: { autocomplete: "biography", rows: 5, class: "form-control rounded w-100 py-2 px-4 bg-white border border-0" },
                      label_html: { class: "d-none" } %>
        </div>
        <div class="pb-3 font-light">
          <p class=" text-silver">Links</p>
        </div>
        <div class="form-group">
          <%= f.label :website, 'Website', class: "form-label fw-semibold" %>
          <%= f.input :website,
                      required: false,
                      input_html: { autocomplete: "website", class: "form-control rounded w-100 py-2 px-4 bg-white border border-0" },
                      label_html: { class: "d-none" } %>
        </div>
        <div class="form-group">
          <%= f.label :linkedin, 'Linkedin', class: "form-label fw-semibold" %>
          <%= f.input :linkedin,
                      required: false,
                      input_html: { autocomplete: "linkedin", class: "form-control rounded w-100 py-2 px-4 bg-white border border-0" },
                      label_html: { class: "d-none" } %>
        </div>
        <div class="form-group">
          <%= f.label :instagram, 'Instagram', class: "form-label fw-semibold" %>
          <%= f.input :instagram,
                      required: false,
                      input_html: { autocomplete: "instagram", class: "form-control rounded w-100 py-2 px-4 bg-white border border-0" },
                      label_html: { class: "d-none" } %>
        </div>
        <div class="form-group">
          <%= f.label :facebook, 'Facebook', class: "form-label fw-semibold" %>
          <%= f.input :facebook,
                      required: false,
                      input_html: { autocomplete: "facebook", class: "form-control rounded w-100 py-2 px-4 bg-white border border-0" },
                      label_html: { class: "d-none" } %>
        </div>
        <div class="form-group">
          <%= f.label :twitter, 'X', class: "form-label fw-semibold" %>
          <%= f.input :twitter,
                      required: false,
                      input_html: { autocomplete: "twitter", class: "form-control rounded w-100 py-2 px-4 bg-white border border-0" },
                      label_html: { class: "d-none" } %>
        </div>
        <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
          <p>Currently waiting confirmation for: <%= resource.unconfirmed_email %></p>
        <% end %>
        <div class="pb-3 font-light">
          <p class=" text-silver">Change your password</p>
        </div>
        <div class="form-group">
          <%= f.label :password, 'New Password', class: "form-label fw-semibold" %>
          <%= f.input :password,
                      required: false,
                      input_html: { autocomplete: "new-password", class: "form-control rounded w-100 py-2 px-4 bg-white border border-0" },
                      label_html: { class: "d-none" } %>
        </div>
        <div class="form-group">
          <%= f.label :password_confirmation, 'Password Confirmation', class: "form-label fw-semibold" %>
          <%= f.input :password_confirmation,
                      required: false,
                      input_html: { autocomplete: "new-password", class: "form-control rounded w-100 py-2 px-4 bg-white border border-0" },
                      label_html: { class: "d-none" } %>
        </div>
        <div class="form-group">
          <%= f.label :current_password, 'Current Password', class: "form-label fw-semibold" %>
          <%= f.input :current_password,
                      hint: "we need your current password to confirm your changes",
                      required: true,
                      input_html: { autocomplete: "current-password", class: "form-control rounded w-100 py-2 px-4 bg-white border border-0" },
                      label_html: { class: "d-none" } %>
        </div>
      </div>

      <div class="form-actions d-flex align-items-center justify-content-center">
        <%= f.button :submit, "Save", class: "btn bg-white rounded shadow-sm px-5 text-uppercase my-5" %>
      </div>
    <% end %>

  </div>
</div>
