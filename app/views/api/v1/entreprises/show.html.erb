<% content_for :header do %>
  <%= render 'show_header' %>
<% end %>

<div class="pt-16"></div>
<div>
    <% if @entreprise.banner.attached? %>
        <%= cl_image_tag @entreprise.banner.key, alt: "Banner entreprise #{@entreprise.name}", class: "img-avatar w-100 h-24" %>
    <% else %>
        <div class="w-100 h-24 bg-navy"></div>
    <% end %>
</div>
<div class="position-relative p-3">
    <div data-controller="overlay">
        <button data-action="click->overlay#toggle" class="btn-delete text-decoration-none entreprise-badge bg-yellow text-charcoal fw-semilight">Send us your details</button>
        <div data-overlay-target="overlay" class="d-none inset-x-0 position-fixed top-0 w-100 h-100 overlay fixed justify-content-center align-items-center text-white z-3">
            <div data-overlay-target="modal" class="d-none mx-2 position-relative w-72 h-auto bg-charcoal text-light-gray py-4 px-3 rounded-xl content-between">
                <button data-action="click->overlay#closeModal" class="d-flex justify-content-start position-absolute top-0 end-0 mt-3 mr-3 btn-delete">
                    <i class="fa-solid fa-xmark text-teal fa-xmark-custom"></i>
                </button>
                <div class="d-flex justify-content-center mb-3">
                    <div class="text-center">
                        <h4 class="fw-bold"><%= @entreprise.name %></h4>
                        <p class="text-teal fw-light"><%= @entreprise.headline %> Cool</p>
                    </div>
                </div>
                <div class="mb-3 text-left">
                    <%= simple_form_for([@entreprise, @contact_entreprise], url: api_v1_entreprise_contact_entreprises_path(@entreprise), method: :post, data: { turbo_frame: "_top" }) do |f| %>
                        <div class="mb-3 text-left">
                            <p class="text-xs">What are you interested in?</p>
                            <%= f.input :category, 
                                        collection: ['Our products and/or Services', 'Our job offers', 'Partnership'],
                                        input_html: { value: "", class: "text-black text-xs w-full rounded-lg" },
                                        label_html: { class: "d-none"},
                                        prompt: "Select" %>
                            <p class="text-xs">Event</p>
                            <%= f.input :event_id,
                                        collection: Event.all,
                                        input_html: { value: "ici", class: "text-black text-xs w-full rounded-lg" },
                                        label_html: { class: "d-none"},
                                        prompt: "Select event we met at" %>
                            <p class="text-xs">Your message:</p>
                            <%= f.input :message,
                                        as: :text,
                                        input_html: { rows: 4, class:"text-black text-xs w-full rounded-lg" },
                                        label_html: { class: "d-none"} %>
                            <div class="flex justify-center items-center">
                                <%= f.button :submit, "Submit", class: "bg-TapCard-teal text-xs px-6 py-1 rounded-full font-jost uppercase font-bold" %>
                            </div>
                        </div>
                    <% end %>
                    <p class="text-xs fw-extralight text-center">By submitting, you consent the company TechPop to have access to your profil. </p>
                </div>
            </div>
        </div>
    </div>
    <h1 class="text-lg font-black"><%= @entreprise.name %></h1>
    <h4 class=" text-TapCard-teal text-sm font-light"><%= @entreprise.headline %> Cool</h4>
    <p><%= @entreprise.industry %></p>
    <p class="font-light text-xs text-TapCard-charcoal"><%= @entreprise.description %></p>
</div>
<div class="text-white bg-TapCard-teal flex justify-center items-center space-x-2 py-[2px]">
    <i class="fa-solid fa-globe"></i>
    <h2 class="text-white font-bold"><%= @entreprise.website %></h2>
</div>
<div class="flex flex-col justify-center items-center py-2 bg-TapCard-lightGray">
    <h4 class="uppercase text-TapCard-charcoal text-sm font-semibold">Follow us</h4>
    <div class="flex items-center justify-around space-x-4">
        <% if @entreprise.twitter.present? %>
            <a href="https://<%= @entreprise.twitter %>" target="_blank"><i class="fa-brands fa-x-twitter text-TapCard-charcoal text-sm"></i></a>
        <% end %>
        <% if @entreprise.linkedin.present? %>
                <a href="https://<%= @entreprise.linkedin %>" target="_blank"><i class="fa-brands fa-linkedin text-TapCard-charcoal text-sm"></i></a>               
        <% end %>
        <% if @entreprise.facebook.present? %>
                <a href="https://<%= @entreprise.facebook %>" target="_blank"><i class="fa-brands fa-facebook text-TapCard-charcoal text-sm"></i></a>                
        <% end %>
        <% if @entreprise.instagram.present? %>
                <a href="https://<%= @entreprise.instagram %>" target="_blank"><i class="fa-brands fa-instagram text-TapCard-charcoal text-sm"></i></a>   
        <% end %>
    </div>
</div>
<div class="border-b border-TapCard-teal w-full"></div>
<div class="flex flex-col justify-center items-center my-4">
    <h1 class="uppercase text-sm font-medium">People</h1>
    <div class="flex justify-around items-start w-full my-4">
        <% @entrepreneurs.each do |entrepreneur| %>          
            <div class="flex flex-col items-center justify-center">
                <% if entrepreneur.user.avatar.attached? %>
                    <%= cl_image_tag entrepreneur.user.avatar.key, alt: "Avatar de #{entrepreneur.user.first_name}", class: "rounded-full object-cover object-center w-10 h-10 border shadow-md" %>
                <% else %>
                    <%= image_tag("avatar.svg", class: "rounded-full w-10 h-10 bg-cover bg-center border shadow-md") %>
                <% end %>
                <% display_name = entrepreneur.user.first_name.length > 5 ? "#{entrepreneur.user.first_name[0, 4]}..." : entrepreneur.user.first_name %>
                <h6 class="font-medium text-sm"><%= display_name %></h6> 
                <p class="text-xs">CEO</p>
            </div>
        <% end %>
        <% @employees.each do |employee| %>
            <div class="flex flex-col items-center justify-center">
                <% if employee.avatar.attached? %>
                    <%= cl_image_tag employee.avatar.key, alt: "Avatar de #{employee.first_name}", class: "rounded-full object-cover object-center w-10 h-10 border shadow-md" %>
                <% else %>
                    <%= image_tag("avatar.svg", class: "rounded-full w-10 h-10 bg-cover bg-center border shadow-md") %>
                <% end %>
                <% display_name = employee.first_name.length > 5 ? "#{employee.first_name[0, 4]}..." : employee.first_name %>
                <h6 class=" font-medium text-sm"><%= display_name %></h6>
            </div>
        
        <% end %>
    </div>
</div>